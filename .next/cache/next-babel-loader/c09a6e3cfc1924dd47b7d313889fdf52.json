{"ast":null,"code":"import Cookies from 'js-cookie';\nimport { handleResponse } from '../_helpers';\nvar currentUserSubject = Cookies.getJSON('currentUser') ? Cookies.getJSON('currentUser') : {};\nexport var authenticationService = {\n  login: login,\n  logout: logout,\n  registration: registration,\n  confirmEmail: confirmEmail,\n  confirmSMS: confirmSMS,\n  currentUser: currentUserSubject,\n\n  get currentUserValue() {\n    return currentUserSubject;\n  }\n\n};\n\nfunction login(username, password) {\n  var requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      username: username,\n      password: password\n    })\n  };\n  return fetch(\"/api/auth/login\", requestOptions).then(handleResponse).then(function (user) {\n    Cookies.set('currentUser', JSON.stringify(user));\n    currentUserSubject = user;\n    return user;\n  }); // .then(() => window.location.reload(true));\n}\n\nfunction registration(name, email, phone, password, password_confirmation) {\n  var requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      name: name,\n      email: email,\n      phone: phone,\n      password: password,\n      password_confirmation: password_confirmation\n    })\n  };\n  return fetch(\"/api/auth/register\", requestOptions).then(handleResponse).then(function (user) {\n    Cookies.set('currentUser', JSON.stringify(user)); // currentUserSubject.next(user);\n\n    currentUserSubject = user;\n    return user;\n  });\n}\n\nfunction logout() {\n  Cookies.remove('currentUser'); // const requestOptions = {\n  //   method: 'GET',\n  //   headers: { 'Content-Type': 'application/json' }\n  // };\n  // return fetch(`/api/auth/logout`, requestOptions)\n  //   .then(handleResponse)\n}\n\nfunction confirmEmail(token) {\n  var requestOptions = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  return fetch(\"/register/activate_email/\".concat(token), requestOptions).then(handleResponse);\n}\n\nfunction confirmSMS(token) {\n  var requestOptions = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  return fetch(\"/register/activate_sms/\".concat(token), requestOptions).then(handleResponse);\n}","map":{"version":3,"sources":["C:/Users/user/projects/vibe/src/_services/authentication.service.ts"],"names":["Cookies","handleResponse","currentUserSubject","getJSON","authenticationService","login","logout","registration","confirmEmail","confirmSMS","currentUser","currentUserValue","username","password","requestOptions","method","headers","body","JSON","stringify","fetch","then","user","set","name","email","phone","password_confirmation","remove","token"],"mappings":"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","sourcesContent":["import Cookies from 'js-cookie';\r\n\r\nimport { handleResponse } from '../_helpers';\r\n\r\nlet currentUserSubject = (Cookies.getJSON('currentUser')) ? Cookies.getJSON('currentUser') : {};\r\n\r\nexport const authenticationService = {\r\n  login,\r\n  logout,\r\n  registration,\r\n  confirmEmail,\r\n  confirmSMS,\r\n  currentUser: currentUserSubject,\r\n  get currentUserValue() { return currentUserSubject }\r\n};\r\n\r\nfunction login(username: string, password: string): any {\r\n  const requestOptions = {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ username, password })\r\n  };\r\n\r\n  return fetch(`/api/auth/login`, requestOptions)\r\n    .then(handleResponse)\r\n    .then(user => {\r\n      Cookies.set('currentUser', JSON.stringify(user));\r\n      currentUserSubject = user;\r\n      return user;\r\n    })\r\n    // .then(() => window.location.reload(true));\r\n}\r\n\r\nfunction registration(name: string, email: string, phone: number, password: number | string, password_confirmation: number | string): any {\r\n  const requestOptions = {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({\r\n      name,\r\n      email,\r\n      phone,\r\n      password,\r\n      password_confirmation\r\n    })\r\n  };\r\n\r\n  return fetch(`/api/auth/register`, requestOptions)\r\n    .then(handleResponse)\r\n    .then(user => {\r\n      Cookies.set('currentUser', JSON.stringify(user));\r\n      // currentUserSubject.next(user);\r\n      currentUserSubject = user;\r\n      return user;\r\n    });\r\n}\r\n\r\nfunction logout(): any {\r\n  Cookies.remove('currentUser');\r\n\r\n  // const requestOptions = {\r\n  //   method: 'GET',\r\n  //   headers: { 'Content-Type': 'application/json' }\r\n  // };\r\n\r\n  // return fetch(`/api/auth/logout`, requestOptions)\r\n  //   .then(handleResponse)\r\n}\r\n\r\nfunction confirmEmail(token: string): any {\r\n  const requestOptions = {\r\n    method: 'GET',\r\n    headers: { 'Content-Type': 'application/json' }\r\n  };\r\n\r\n  return fetch(`/register/activate_email/${token}`, requestOptions)\r\n    .then(handleResponse)\r\n}\r\n\r\nfunction confirmSMS(token: string): any {\r\n  const requestOptions = {\r\n    method: 'GET',\r\n    headers: { 'Content-Type': 'application/json' }\r\n  };\r\n\r\n  return fetch(`/register/activate_sms/${token}`, requestOptions)\r\n    .then(handleResponse)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}