{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { GET_ALL_SUPPORT_TASKS, DELETE_SUPPORT_TASK } from \"./types\";\nimport fetch from 'isomorphic-unfetch';\nimport { authenticationService } from \"../../_services\";\nexport var getAllSupportTasks = function getAllSupportTasks() {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var user, response, promise;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              user = authenticationService.currentUserValue;\n              _context.next = 3;\n              return fetch(\"https://intim-vibe-api.padilo.pro/api/admin/support\", {\n                method: 'GET',\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*',\n                  'Authorization': \"\".concat(user.token_type, \" \").concat(user.token)\n                }\n              });\n\n            case 3:\n              response = _context.sent;\n              promise = response.json();\n              promise.then(function (res) {\n                return dispatch({\n                  type: GET_ALL_SUPPORT_TASKS,\n                  payload: res.data\n                });\n              })[\"catch\"](function (err) {\n                return console.error('Error: ', err);\n              });\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var editSupportTasks = function editSupportTasks(data) {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      var user, response, promise;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              user = authenticationService.currentUserValue;\n              _context2.next = 3;\n              return fetch(\"https://intim-vibe-api.padilo.pro/api/admin/support/edit/\".concat(data.id), {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*',\n                  'Authorization': \"\".concat(user.token_type, \" \").concat(user.token)\n                },\n                body: JSON.stringify({\n                  subject: data.subject,\n                  message: data.message,\n                  answer: data.answer\n                })\n              });\n\n            case 3:\n              response = _context2.sent;\n              promise = response.json();\n              promise.then(function (res) {\n                console.log('res:', res);\n                return dispatch({\n                  type: GET_ALL_SUPPORT_TASKS,\n                  payload: res\n                });\n              });\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var deleteSupportTask = function deleteSupportTask(id) {\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch) {\n      var user, response, promise;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              user = authenticationService.currentUserValue;\n              _context3.next = 3;\n              return fetch(\"https://intim-vibe-api.padilo.pro/api/admin/support/\".concat(id), {\n                method: 'GET',\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*',\n                  'Authorization': \"\".concat(user.token_type, \" \").concat(user.token)\n                }\n              });\n\n            case 3:\n              response = _context3.sent;\n              promise = response.json();\n              promise.then(function (res) {\n                return dispatch({\n                  type: DELETE_SUPPORT_TASK,\n                  payload: res\n                });\n              });\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};","map":{"version":3,"sources":["C:/Users/user/projects/vibe/src/redux/actions/adminActions.ts"],"names":["GET_ALL_SUPPORT_TASKS","DELETE_SUPPORT_TASK","fetch","authenticationService","getAllSupportTasks","dispatch","user","currentUserValue","method","headers","token_type","token","response","promise","json","then","res","type","payload","data","err","console","error","editSupportTasks","id","body","JSON","stringify","subject","message","answer","log","deleteSupportTask"],"mappings":"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","sourcesContent":["import { GET_ALL_SUPPORT_TASKS, DELETE_SUPPORT_TASK } from \"./types\"\r\nimport fetch from 'isomorphic-unfetch'\r\nimport { authenticationService } from \"../../_services\"\r\n\r\nexport const getAllSupportTasks = () => async (dispatch: any) => {\r\n  const user = authenticationService.currentUserValue;\r\n  const response = await fetch(`https://intim-vibe-api.padilo.pro/api/admin/support`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Access-Control-Allow-Origin': '*',\r\n      'Authorization': `${user.token_type} ${user.token}`\r\n    }\r\n  });\r\n  const promise = response.json();\r\n  promise.then(res => {\r\n    return dispatch({ type: GET_ALL_SUPPORT_TASKS, payload: res.data })\r\n  }).catch(err => console.error('Error: ', err));\r\n}\r\nexport const editSupportTasks = (data: any) => async (dispatch: any) => {\r\n  const user = authenticationService.currentUserValue;\r\n  const response = await fetch(`https://intim-vibe-api.padilo.pro/api/admin/support/edit/${data.id}`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Access-Control-Allow-Origin': '*',\r\n      'Authorization': `${user.token_type} ${user.token}`\r\n    },\r\n    body: JSON.stringify({\r\n      subject: data.subject,\r\n      message: data.message,\r\n      answer: data.answer\r\n    })\r\n  });\r\n  const promise = response.json();\r\n  promise.then(res => {\r\n    console.log('res:', res);\r\n    \r\n    return dispatch({ type: GET_ALL_SUPPORT_TASKS, payload: res })\r\n  });\r\n}\r\nexport const deleteSupportTask = (id: number | string) => async (dispatch: any) => {\r\n  const user = authenticationService.currentUserValue;\r\n  const response = await fetch(`https://intim-vibe-api.padilo.pro/api/admin/support/${id}`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Access-Control-Allow-Origin': '*',\r\n      'Authorization': `${user.token_type} ${user.token}`\r\n    }\r\n  });\r\n  const promise = response.json();\r\n  promise.then(res => {\r\n    return dispatch({ type: DELETE_SUPPORT_TASK, payload: res })\r\n  });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}