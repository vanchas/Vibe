{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport Cookies from 'js-cookie';\nimport fetch from 'isomorphic-unfetch';\nimport { handleResponse } from '../_helpers';\nvar currentUserSubject = Cookies.getJSON('currentUser') ? Cookies.getJSON('currentUser') : {};\nvar target = \"https://intim-vibe-api.padilo.pro/api\";\nexport var authenticationService = {\n  login: login,\n  logout: logout,\n  registrationAdmin: registrationAdmin,\n  registrationClient: registrationClient,\n  confirmEmail: confirmEmail,\n  confirmSMS: confirmSMS,\n  currentUser: currentUserSubject,\n\n  get currentUserValue() {\n    return currentUserSubject;\n  }\n\n};\n\nfunction login(username, password) {\n  return fetch(\"\".concat(target, \"/login\"), {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      username: username,\n      password: password\n    })\n  }).then(handleResponse).then(function (user) {\n    Cookies.set('currentUser', JSON.stringify(user));\n    currentUserSubject = user;\n    return user;\n  }); // .then(() => window.location.reload(true));\n}\n\nfunction registrationClient(_x, _x2, _x3, _x4) {\n  return _registrationClient.apply(this, arguments);\n}\n\nfunction _registrationClient() {\n  _registrationClient = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(name, password, email, password_confirmation) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch(\"\".concat(target, \"/client/register\"), {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                name: name,\n                password: password,\n                email: email,\n                password_confirmation: password_confirmation\n              })\n            }).then(handleResponse).then(function (admin) {\n              Cookies.set('currentUser', JSON.stringify(admin));\n              currentUserSubject = admin;\n              return admin;\n            });\n\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _registrationClient.apply(this, arguments);\n}\n\nfunction registrationAdmin(_x5, _x6, _x7, _x8) {\n  return _registrationAdmin.apply(this, arguments);\n}\n\nfunction _registrationAdmin() {\n  _registrationAdmin = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(name, password, email, password_confirmation) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return fetch(\"\".concat(target, \"/admin/register\"), {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                name: name,\n                password: password,\n                email: email,\n                password_confirmation: password_confirmation\n              })\n            }).then(handleResponse).then(function (admin) {\n              Cookies.set('currentUser', JSON.stringify(admin));\n              currentUserSubject = admin;\n              return admin;\n            });\n\n          case 2:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _registrationAdmin.apply(this, arguments);\n}\n\nfunction logout() {\n  Cookies.remove('currentUser'); // const requestOptions = {\n  //   method: 'GET',\n  //   headers: { 'Content-Type': 'application/json' }\n  // };\n  // return fetch(`/api/auth/logout`, requestOptions)\n  //   .then(handleResponse)\n}\n\nfunction confirmEmail(token) {\n  var requestOptions = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  return fetch(\"/register/activate_email/\".concat(token), requestOptions).then(handleResponse);\n}\n\nfunction confirmSMS(token) {\n  var requestOptions = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  return fetch(\"/register/activate_sms/\".concat(token), requestOptions).then(handleResponse);\n}","map":{"version":3,"sources":["C:/Users/user/projects/vibe/src/_services/authentication.service.ts"],"names":["Cookies","fetch","handleResponse","currentUserSubject","getJSON","target","authenticationService","login","logout","registrationAdmin","registrationClient","confirmEmail","confirmSMS","currentUser","currentUserValue","username","password","method","headers","body","JSON","stringify","then","user","set","name","email","password_confirmation","admin","remove","token","requestOptions"],"mappings":"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","sourcesContent":["import Cookies from 'js-cookie';\r\nimport fetch from 'isomorphic-unfetch';\r\nimport { handleResponse } from '../_helpers';\r\n\r\nlet currentUserSubject = (Cookies.getJSON('currentUser')) ? Cookies.getJSON('currentUser') : {};\r\n\r\nconst target = `https://intim-vibe-api.padilo.pro/api`;\r\n\r\nexport const authenticationService = {\r\n  login,\r\n  logout,\r\n  registrationAdmin,\r\n  registrationClient,\r\n  confirmEmail,\r\n  confirmSMS,\r\n  currentUser: currentUserSubject,\r\n  get currentUserValue() { return currentUserSubject }\r\n};\r\n\r\nfunction login(username: string, password: string): any {\r\n  return fetch(`${target}/login`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ username, password })\r\n  }).then(handleResponse)\r\n    .then(user => {\r\n      Cookies.set('currentUser', JSON.stringify(user));\r\n      currentUserSubject = user;\r\n      return user;\r\n    })\r\n  // .then(() => window.location.reload(true));\r\n}\r\n\r\nasync function registrationClient(name: string, password: number | string, email: string, password_confirmation: number | string): Promise<any> {\r\n  return await fetch(`${target}/client/register`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({\r\n      name,\r\n      password,\r\n      email,\r\n      password_confirmation\r\n    })\r\n  }).then(handleResponse)\r\n    .then(admin => {\r\n      Cookies.set('currentUser', JSON.stringify(admin));\r\n      currentUserSubject = admin;\r\n      return admin;\r\n    });\r\n}\r\n\r\nasync function registrationAdmin(name: string, password: number | string, email: string, password_confirmation: number | string): Promise<any> {\r\n  return await fetch(`${target}/admin/register`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({\r\n      name,\r\n      password,\r\n      email,\r\n      password_confirmation\r\n    })\r\n  }).then(handleResponse)\r\n    .then(admin => {\r\n      Cookies.set('currentUser', JSON.stringify(admin));\r\n      currentUserSubject = admin;\r\n      return admin;\r\n    });\r\n}\r\n\r\nfunction logout(): any {\r\n  Cookies.remove('currentUser');\r\n\r\n  // const requestOptions = {\r\n  //   method: 'GET',\r\n  //   headers: { 'Content-Type': 'application/json' }\r\n  // };\r\n\r\n  // return fetch(`/api/auth/logout`, requestOptions)\r\n  //   .then(handleResponse)\r\n}\r\n\r\nfunction confirmEmail(token: string): any {\r\n  const requestOptions = {\r\n    method: 'GET',\r\n    headers: { 'Content-Type': 'application/json' }\r\n  };\r\n\r\n  return fetch(`/register/activate_email/${token}`, requestOptions)\r\n    .then(handleResponse)\r\n}\r\n\r\nfunction confirmSMS(token: string): any {\r\n  const requestOptions = {\r\n    method: 'GET',\r\n    headers: { 'Content-Type': 'application/json' }\r\n  };\r\n\r\n  return fetch(`/register/activate_sms/${token}`, requestOptions)\r\n    .then(handleResponse)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}