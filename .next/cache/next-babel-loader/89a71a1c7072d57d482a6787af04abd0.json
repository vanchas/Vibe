{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { GET_ALL_SUPPORT_TASKS, DELETE_SUPPORT_TASK } from \"./types\";\nimport fetch from 'isomorphic-unfetch';\nimport { authenticationService } from \"../../_services\";\nexport var getAllSupportTasks = function getAllSupportTasks() {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var user, response, promise;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              user = authenticationService.currentUserValue;\n              _context.next = 3;\n              return fetch(\"https://intim-vibe-api.padilo.pro/api/admin/support\", {\n                method: 'GET',\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*',\n                  'Authorization': \"\".concat(user.token_type, \" \").concat(user.token)\n                }\n              });\n\n            case 3:\n              response = _context.sent;\n              promise = response.json();\n              promise.then(function (res) {\n                return dispatch({\n                  type: GET_ALL_SUPPORT_TASKS,\n                  payload: res.data\n                });\n              })[\"catch\"](function (err) {\n                return console.error('Error: ', err);\n              });\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var editSupportTasks = function editSupportTasks(data) {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      var user, response, promise;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              user = authenticationService.currentUserValue;\n              _context2.next = 3;\n              return fetch(\"https://intim-vibe-api.padilo.pro/api/admin/support/edit/\".concat(data.id), {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*',\n                  'Authorization': \"\".concat(user.token_type, \" \").concat(user.token)\n                },\n                body: JSON.stringify({\n                  subject: data.subject,\n                  message: data.message,\n                  answer: data.answer\n                })\n              });\n\n            case 3:\n              response = _context2.sent;\n              promise = response.json();\n              promise.then(function (res) {\n                return dispatch({\n                  type: GET_ALL_SUPPORT_TASKS,\n                  payload: res\n                });\n              }).then(function () {\n                return window.location.reload(true);\n              });\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var deleteSupportTask = function deleteSupportTask(id) {\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch) {\n      var user, response;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              user = authenticationService.currentUserValue;\n              _context3.next = 3;\n              return fetch(\"https://intim-vibe-api.padilo.pro/api/admin/support/\".concat(id), {\n                method: 'GET',\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*',\n                  'Authorization': \"\".concat(user.token_type, \" \").concat(user.token)\n                }\n              });\n\n            case 3:\n              response = _context3.sent;\n              return _context3.abrupt(\"return\", dispatch({\n                type: DELETE_SUPPORT_TASK,\n                payload: id\n              }));\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};","map":null,"metadata":{},"sourceType":"module"}