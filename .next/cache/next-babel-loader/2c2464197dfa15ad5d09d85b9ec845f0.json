{"ast":null,"code":"import { TEST_CREATE_POST, SHOW_LOADER, HIDE_LOADER, SHOW_ALERT, HIDE_ALERT, TEST_REQUEST_POSTS, GET_CATEGORIES, GET_ALL_POSTS, GET_LOCAITONS_INFO, GET_CITIES, CREATE_SUPPORT_TASK, GET_ALL_USER_TASKS } from \"./types\";\nimport fetch from 'isomorphic-unfetch';\nimport { authenticationService } from \"../../_services\"; // T E S T \n\nexport function createPost(post) {\n  return {\n    type: TEST_CREATE_POST,\n    payload: post\n  };\n}\n;\nexport function showLoader() {\n  return {\n    type: SHOW_LOADER\n  };\n}\nexport function hideLoader() {\n  return {\n    type: HIDE_LOADER\n  };\n}\nexport function showAlert(text) {\n  return dispatch => {\n    dispatch({\n      type: SHOW_ALERT,\n      payload: text\n    });\n    setTimeout(() => {\n      dispatch(hideAlert());\n    }, 3000);\n  };\n}\nexport function hideAlert() {\n  return {\n    type: HIDE_ALERT\n  };\n}\nexport function fetchPosts() {\n  return {\n    type: TEST_REQUEST_POSTS\n  };\n}\n;\nexport const getCategories = () => async dispatch => {\n  const response = await fetch('https://intim-vibe-api.padilo.pro/api/categories');\n  const promise = response.json();\n  promise.then(res => {\n    return dispatch({\n      type: GET_CATEGORIES,\n      payload: res.data\n    });\n  }).catch(err => console.error('Error: ', err));\n};\nexport const getAllPosts = () => async dispatch => {\n  const response = await fetch(`https://intim-vibe-api.padilo.pro/api/posts`);\n  const promise = response.json();\n  promise.then(res => {\n    return dispatch({\n      type: GET_ALL_POSTS,\n      payload: res.data\n    });\n  }).catch(err => console.error('Error: ', err));\n};\nexport const getLocationsInfo = () => async dispatch => {\n  const response = await fetch(`https://intim-vibe-api.padilo.pro/api/location`);\n  const promise = response.json();\n  promise.then(res => {\n    return dispatch({\n      type: GET_LOCAITONS_INFO,\n      payload: res.data\n    });\n  }).catch(err => console.error('Error: ', err));\n};\nexport const getCities = stateId => async dispatch => {\n  const response = await fetch(`https://intim-vibe-api.padilo.pro/api/cities/${stateId}`);\n  const promise = response.json();\n  promise.then(res => {\n    return dispatch({\n      type: GET_CITIES,\n      payload: res\n    });\n  }).catch(err => console.error('Error: ', err));\n};\nexport const createSupportTask = task => async dispatch => {\n  const user = authenticationService.currentUserValue;\n  const response = await fetch(`https://intim-vibe-api.padilo.pro/api/support/create`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n      'Authorization': `${user.token_type} ${user.token}`\n    },\n    body: JSON.stringify(task)\n  });\n  const promise = response.json();\n  promise.then(res => console.log(res)).catch(err => console.error('Error: ', err));\n  return dispatch({\n    type: CREATE_SUPPORT_TASK,\n    payload: task\n  });\n};\nexport const getAllUsersTasks = () => async dispatch => {\n  const user = await authenticationService.currentUserValue;\n  const response = await fetch(`https://intim-vibe-api.padilo.pro/api/support/${user.user.id}`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n      'Authorization': `${user.token_type} ${user.token}`\n    }\n  });\n  const promise = response.json();\n  promise.then(res => {\n    return dispatch({\n      type: GET_ALL_USER_TASKS,\n      payload: res\n    });\n  }).catch(err => console.error('Error: ', err));\n};","map":null,"metadata":{},"sourceType":"module"}