{"ast":null,"code":"import Cookies from 'js-cookie';\nimport { handleResponse } from '../_helpers';\nvar currentUserSubject = Cookies.getJSON('currentUser') ? Cookies.getJSON('currentUser') : {};\nexport var authenticationService = {\n  login: login,\n  logout: logout,\n  registration: registration,\n  confirmEmail: confirmEmail,\n  confirmSMS: confirmSMS,\n  currentUser: currentUserSubject,\n\n  get currentUserValue() {\n    return currentUserSubject;\n  }\n\n};\n\nfunction login(username, password) {\n  var requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      username: username,\n      password: password\n    })\n  };\n  return fetch(\"/api/auth/login\", requestOptions).then(handleResponse).then(function (user) {\n    Cookies.set('currentUser', JSON.stringify(user));\n    currentUserSubject = user;\n    return user;\n  }).then(function () {\n    return window.location.reload(true);\n  });\n}\n\nfunction registration(name, email, phone, password, password_confirmation) {\n  var requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      name: name,\n      email: email,\n      phone: phone,\n      password: password,\n      password_confirmation: password_confirmation\n    })\n  };\n  return fetch(\"/api/auth/register\", requestOptions).then(handleResponse).then(function (user) {\n    Cookies.set('currentUser', JSON.stringify(user)); // currentUserSubject.next(user);\n\n    currentUserSubject = user;\n    return user;\n  });\n}\n\nfunction logout() {\n  Cookies.remove('currentUser'); // const requestOptions = {\n  //   method: 'GET',\n  //   headers: { 'Content-Type': 'application/json' }\n  // };\n  // return fetch(`/api/auth/logout`, requestOptions)\n  //   .then(handleResponse)\n}\n\nfunction confirmEmail(token) {\n  var requestOptions = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  return fetch(\"/register/activate_email/\".concat(token), requestOptions).then(handleResponse);\n}\n\nfunction confirmSMS(token) {\n  var requestOptions = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  return fetch(\"/register/activate_sms/\".concat(token), requestOptions).then(handleResponse);\n}","map":null,"metadata":{},"sourceType":"module"}