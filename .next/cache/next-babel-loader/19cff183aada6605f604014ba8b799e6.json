{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { UPDATE_POST, REMOVE_POST, GET_ALL_POSTS } from \"./types\";\nimport fetch from 'isomorphic-unfetch';\nimport { authenticationService } from \"../../_services\"; // import { useRouter } from \"next/router\"\n\nexport function getAllProviderPost() {\n  return {\n    type: GET_ALL_POSTS\n  };\n}\n;\nexport var addProviderPost = function addProviderPost(post) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var user;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              user = authenticationService.currentUserValue;\n              _context.next = 3;\n              return fetch('https://intim-vibe-api.padilo.pro/api/posts/create', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*',\n                  'Authorization': \"\".concat(user.token_type, \" \").concat(user.token)\n                },\n                body: JSON.stringify(post)\n              }).then(function (res) {\n                return res.json();\n              }).then(function (data) {\n                return console.log(data);\n              })[\"catch\"](function (err) {\n                return console.log('Error:', err);\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport function updateProviderPost(post) {\n  return {\n    type: UPDATE_POST,\n    payload: post\n  };\n}\n;\nexport function removeProviderPost(id) {\n  return {\n    type: REMOVE_POST,\n    payload: id\n  };\n}\n; // export function showAlert(text: string): any {\n//     return (dispatch: Function) => {\n//         dispatch({\n//             type: SHOW_ALERT,\n//             payload: text\n//         })\n//         setTimeout(() => {\n//             dispatch(hideAlert())\n//         }, 3000)\n//     }\n// }","map":{"version":3,"sources":["C:/Users/user/projects/vibe/src/redux/actions/providerActions.ts"],"names":["UPDATE_POST","REMOVE_POST","GET_ALL_POSTS","fetch","authenticationService","getAllProviderPost","type","addProviderPost","post","dispatch","user","currentUserValue","method","headers","token_type","token","body","JSON","stringify","then","res","json","data","console","log","err","updateProviderPost","payload","removeProviderPost","id"],"mappings":";;AAAA,SAAiCA,WAAjC,EAA8CC,WAA9C,EAA2DC,aAA3D,QAAgF,SAAhF;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,SAASC,qBAAT,QAAsC,iBAAtC,C,CACA;;AAEA,OAAO,SAASC,kBAAT,GAAmC;AACxC,SAAO;AACLC,IAAAA,IAAI,EAAEJ;AADD,GAAP;AAGD;AAAA;AAED,OAAO,IAAMK,eAAe,GAAG,SAAlBA,eAAkB,CAACC,IAAD;AAAA;AAAA,wEAAe,iBAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACtCC,cAAAA,IADsC,GAC/BN,qBAAqB,CAACO,gBADS;AAAA;AAAA,qBAEtCR,KAAK,CAAC,oDAAD,EAAuD;AAChES,gBAAAA,MAAM,EAAE,MADwD;AAEhEC,gBAAAA,OAAO,EAAE;AACP,kCAAgB,kBADT;AAEP,iDAA+B,GAFxB;AAGP,6CAAoBH,IAAI,CAACI,UAAzB,cAAuCJ,IAAI,CAACK,KAA5C;AAHO,iBAFuD;AAOhEC,gBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeV,IAAf;AAP0D,eAAvD,CAAL,CASHW,IATG,CASE,UAAAC,GAAG;AAAA,uBAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,eATL,EAUHF,IAVG,CAUE,UAAAG,IAAI;AAAA,uBAAIC,OAAO,CAACC,GAAR,CAAYF,IAAZ,CAAJ;AAAA,eAVN,WAWG,UAAAG,GAAG;AAAA,uBAAIF,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBC,GAAtB,CAAJ;AAAA,eAXN,CAFsC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAf;;AAAA;AAAA;AAAA;AAAA;AAAA,CAAxB;AAeP,OAAO,SAASC,kBAAT,CAA4BlB,IAA5B,EAAqD;AAC1D,SAAO;AACLF,IAAAA,IAAI,EAAEN,WADD;AAEL2B,IAAAA,OAAO,EAAEnB;AAFJ,GAAP;AAID;AAAA;AACD,OAAO,SAASoB,kBAAT,CAA4BC,EAA5B,EAAsD;AAC3D,SAAO;AACLvB,IAAAA,IAAI,EAAEL,WADD;AAEL0B,IAAAA,OAAO,EAAEE;AAFJ,GAAP;AAID;AAAA,C,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { ADD_POST, ProviderPost, UPDATE_POST, REMOVE_POST, GET_ALL_POSTS } from \"./types\"\r\nimport fetch from 'isomorphic-unfetch'\r\nimport { authenticationService } from \"../../_services\";\r\n// import { useRouter } from \"next/router\"\r\n\r\nexport function getAllProviderPost(): any {\r\n  return {\r\n    type: GET_ALL_POSTS\r\n  }\r\n};\r\n\r\nexport const addProviderPost = (post: any) => async (dispatch: any) => {\r\n  const user = authenticationService.currentUserValue;\r\n  await fetch('https://intim-vibe-api.padilo.pro/api/posts/create', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Access-Control-Allow-Origin': '*',\r\n      'Authorization': `${user.token_type} ${user.token}`\r\n    },\r\n    body: JSON.stringify(post)\r\n  })\r\n    .then(res => res.json())\r\n    .then(data => console.log(data))\r\n    .catch(err => console.log('Error:', err))\r\n};\r\nexport function updateProviderPost(post: ProviderPost): any {\r\n  return {\r\n    type: UPDATE_POST,\r\n    payload: post\r\n  }\r\n};\r\nexport function removeProviderPost(id: number | string): any {\r\n  return {\r\n    type: REMOVE_POST,\r\n    payload: id\r\n  }\r\n};\r\n\r\n// export function showAlert(text: string): any {\r\n//     return (dispatch: Function) => {\r\n//         dispatch({\r\n//             type: SHOW_ALERT,\r\n//             payload: text\r\n//         })\r\n//         setTimeout(() => {\r\n//             dispatch(hideAlert())\r\n//         }, 3000)\r\n//     }\r\n// }\r\n\r\n"]},"metadata":{},"sourceType":"module"}