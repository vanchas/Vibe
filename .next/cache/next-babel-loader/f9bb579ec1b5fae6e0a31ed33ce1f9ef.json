{"ast":null,"code":"import Cookies from 'js-cookie';\nimport { handleResponse } from '../_helpers';\nlet currentUserSubject = Cookies.getJSON('currentUser') ? Cookies.getJSON('currentUser') : {};\nexport const authenticationService = {\n  login,\n  logout,\n  registration,\n  confirmEmail,\n  confirmSMS,\n  currentUser: currentUserSubject,\n\n  get currentUserValue() {\n    return currentUserSubject;\n  }\n\n};\n\nfunction login(username, password) {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      username,\n      password\n    })\n  };\n  return fetch(`/api/auth/login`, requestOptions).then(handleResponse).then(user => {\n    Cookies.set('currentUser', JSON.stringify(user));\n    currentUserSubject = user;\n    return user;\n  }).then(() => window.location.reload(true));\n}\n\nfunction registration(name, email, phone, password, password_confirmation) {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      name,\n      email,\n      phone,\n      password,\n      password_confirmation\n    })\n  };\n  return fetch(`/api/auth/register`, requestOptions).then(handleResponse).then(user => {\n    Cookies.set('currentUser', JSON.stringify(user)); // currentUserSubject.next(user);\n\n    currentUserSubject = user;\n    return user;\n  });\n}\n\nfunction logout() {\n  Cookies.remove('currentUser'); // const requestOptions = {\n  //   method: 'GET',\n  //   headers: { 'Content-Type': 'application/json' }\n  // };\n  // return fetch(`/api/auth/logout`, requestOptions)\n  //   .then(handleResponse)\n}\n\nfunction confirmEmail(token) {\n  const requestOptions = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  return fetch(`/register/activate_email/${token}`, requestOptions).then(handleResponse);\n}\n\nfunction confirmSMS(token) {\n  const requestOptions = {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  return fetch(`/register/activate_sms/${token}`, requestOptions).then(handleResponse);\n}","map":null,"metadata":{},"sourceType":"module"}